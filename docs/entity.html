<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.5.dev4+g1709915.d20200207" />
<title>multisieve_coreference.entity API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>multisieve_coreference.entity</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L0-L134" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Entity:
    &#34;&#34;&#34;
    A cluster of mentions that refer to the same concept.

    No promises are made about the order or uniqueness of mentions.

    Following multi-sieve coreference (Lee et al., 2013), an entity can be
    queried for any attribute that a mention has, and will return the set of
    their values.

    If some of the mentions have an attribute that others don&#39;t, Entity will
    quietly exclude the mentions that don&#39;t have the attribute and return the
    set of values for the mentions that do have it.
    &#34;&#34;&#34;

    def __init__(self, mentions):
        self.mentions = list(mentions)
        if not self.mentions:
            raise ValueError(&#34;An Entity must consist of at least one Mention.&#34;)

    def __repr__(self):
        return self.__class__.__name__ + f&#34;({self.mentions!r})&#34;

    def __str__(self):
        return self.__class__.__name__ + f&#34;({[m.id for m in self.mentions]!r})&#34;

    def __eq__(self, other):
        return isinstance(other, Entity) and self.mentions == other.mentions

    def __iter__(self):
        return iter(self.mentions)

    def __len__(self):
        return len(self.mentions)

    def __contains__(self, mention):
        return mention in self.mentions

    def _merge(self, entity):
        &#34;&#34;&#34;
        Merge a given Entity into this one.

        No attention is paid to whether any mention in `entity` is already in
        this one. Consequently, this Entity may contain duplicates after
        merging.

        If you are thinking of using this function, you probably want to use
        `Entities.merge` instead.
        &#34;&#34;&#34;
        # Prevent infinite extension
        if entity.mentions is not self.mentions:
            self.mentions.extend(entity)

    def non_unique_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get a list of mention attribute values

        Crudely: `[getattr(mention, attr) for mention in self]`

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        # Try to get all answers
        all_answers = [
            getattr(m, attr) for m in self if hasattr(m, attr)
        ]
        if not all_answers:
            raise AttributeError(
                &#34;None of the mentions have a non-None value for the attribute&#34;
                f&#34; {attr!r}&#34;)
        return all_answers

    def non_unique_non_none_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get a list of mention attribute values, quietly leaving out None values

        Crudely:
            ```
            [
                getattr(mention, attr)
                for mention in self
                if getattr(mention, attr) is not None
            ]
            ```

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return [
            ans
            for ans in self.non_unique_mention_attr(attr)
            if ans is not None
        ]

    def mention_attr(self, attr):
        &#34;&#34;&#34;
        Get the set of the values returned by
        `self.non_unique_non_none_mention_attr`

        Crudely: `{getattr(mention, attr) for mention in self}`

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return set(self.non_unique_non_none_mention_attr(attr))

    def flat_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get the union of the values returned by
        `self.non_unique_non_none_mention_attr`

        Crudely: `{elem for itr in self.mention_attr(att) for elem in itr}`

        Useful if the value is an iterable for every mention

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return {
            elem
            for itr in self.non_unique_non_none_mention_attr(attr)
            for elem in itr
        }</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="multisieve_coreference.entity.Entity"><code class="flex name class">
<span>class <span class="ident">Entity</span></span>
<span>(</span><span>mentions)</span>
</code></dt>
<dd>
<section class="desc"><p>A cluster of mentions that refer to the same concept.</p>
<p>No promises are made about the order or uniqueness of mentions.</p>
<p>Following multi-sieve coreference (Lee et al., 2013), an entity can be
queried for any attribute that a mention has, and will return the set of
their values.</p>
<p>If some of the mentions have an attribute that others don't, Entity will
quietly exclude the mentions that don't have the attribute and return the
set of values for the mentions that do have it.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L1-L135" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Entity:
    &#34;&#34;&#34;
    A cluster of mentions that refer to the same concept.

    No promises are made about the order or uniqueness of mentions.

    Following multi-sieve coreference (Lee et al., 2013), an entity can be
    queried for any attribute that a mention has, and will return the set of
    their values.

    If some of the mentions have an attribute that others don&#39;t, Entity will
    quietly exclude the mentions that don&#39;t have the attribute and return the
    set of values for the mentions that do have it.
    &#34;&#34;&#34;

    def __init__(self, mentions):
        self.mentions = list(mentions)
        if not self.mentions:
            raise ValueError(&#34;An Entity must consist of at least one Mention.&#34;)

    def __repr__(self):
        return self.__class__.__name__ + f&#34;({self.mentions!r})&#34;

    def __str__(self):
        return self.__class__.__name__ + f&#34;({[m.id for m in self.mentions]!r})&#34;

    def __eq__(self, other):
        return isinstance(other, Entity) and self.mentions == other.mentions

    def __iter__(self):
        return iter(self.mentions)

    def __len__(self):
        return len(self.mentions)

    def __contains__(self, mention):
        return mention in self.mentions

    def _merge(self, entity):
        &#34;&#34;&#34;
        Merge a given Entity into this one.

        No attention is paid to whether any mention in `entity` is already in
        this one. Consequently, this Entity may contain duplicates after
        merging.

        If you are thinking of using this function, you probably want to use
        `Entities.merge` instead.
        &#34;&#34;&#34;
        # Prevent infinite extension
        if entity.mentions is not self.mentions:
            self.mentions.extend(entity)

    def non_unique_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get a list of mention attribute values

        Crudely: `[getattr(mention, attr) for mention in self]`

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        # Try to get all answers
        all_answers = [
            getattr(m, attr) for m in self if hasattr(m, attr)
        ]
        if not all_answers:
            raise AttributeError(
                &#34;None of the mentions have a non-None value for the attribute&#34;
                f&#34; {attr!r}&#34;)
        return all_answers

    def non_unique_non_none_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get a list of mention attribute values, quietly leaving out None values

        Crudely:
            ```
            [
                getattr(mention, attr)
                for mention in self
                if getattr(mention, attr) is not None
            ]
            ```

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return [
            ans
            for ans in self.non_unique_mention_attr(attr)
            if ans is not None
        ]

    def mention_attr(self, attr):
        &#34;&#34;&#34;
        Get the set of the values returned by
        `self.non_unique_non_none_mention_attr`

        Crudely: `{getattr(mention, attr) for mention in self}`

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return set(self.non_unique_non_none_mention_attr(attr))

    def flat_mention_attr(self, attr):
        &#34;&#34;&#34;
        Get the union of the values returned by
        `self.non_unique_non_none_mention_attr`

        Crudely: `{elem for itr in self.mention_attr(att) for elem in itr}`

        Useful if the value is an iterable for every mention

        Raise AttributeError if none of the mentions contained in the entity
        have the requested attribute.

        If at least one mention has the requested attribute, quietly leave out
        the mentions that don&#39;t.
        &#34;&#34;&#34;
        return {
            elem
            for itr in self.non_unique_non_none_mention_attr(attr)
            for elem in itr
        }</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="multisieve_coreference.entity.Entity.flat_mention_attr"><code class="name flex">
<span>def <span class="ident">flat_mention_attr</span></span>(<span>self, attr)</span>
</code></dt>
<dd>
<section class="desc"><p>Get the union of the values returned by
<code>self.non_unique_non_none_mention_attr</code></p>
<p>Crudely: <code>{elem for itr in self.mention_attr(att) for elem in itr}</code></p>
<p>Useful if the value is an iterable for every mention</p>
<p>Raise AttributeError if none of the mentions contained in the entity
have the requested attribute.</p>
<p>If at least one mention has the requested attribute, quietly leave out
the mentions that don't.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L116-L135" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def flat_mention_attr(self, attr):
    &#34;&#34;&#34;
    Get the union of the values returned by
    `self.non_unique_non_none_mention_attr`

    Crudely: `{elem for itr in self.mention_attr(att) for elem in itr}`

    Useful if the value is an iterable for every mention

    Raise AttributeError if none of the mentions contained in the entity
    have the requested attribute.

    If at least one mention has the requested attribute, quietly leave out
    the mentions that don&#39;t.
    &#34;&#34;&#34;
    return {
        elem
        for itr in self.non_unique_non_none_mention_attr(attr)
        for elem in itr
    }</code></pre>
</details>
</dd>
<dt id="multisieve_coreference.entity.Entity.mention_attr"><code class="name flex">
<span>def <span class="ident">mention_attr</span></span>(<span>self, attr)</span>
</code></dt>
<dd>
<section class="desc"><p>Get the set of the values returned by
<code>self.non_unique_non_none_mention_attr</code></p>
<p>Crudely: <code>{getattr(mention, attr) for mention in self}</code></p>
<p>Raise AttributeError if none of the mentions contained in the entity
have the requested attribute.</p>
<p>If at least one mention has the requested attribute, quietly leave out
the mentions that don't.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L101-L114" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def mention_attr(self, attr):
    &#34;&#34;&#34;
    Get the set of the values returned by
    `self.non_unique_non_none_mention_attr`

    Crudely: `{getattr(mention, attr) for mention in self}`

    Raise AttributeError if none of the mentions contained in the entity
    have the requested attribute.

    If at least one mention has the requested attribute, quietly leave out
    the mentions that don&#39;t.
    &#34;&#34;&#34;
    return set(self.non_unique_non_none_mention_attr(attr))</code></pre>
</details>
</dd>
<dt id="multisieve_coreference.entity.Entity.non_unique_mention_attr"><code class="name flex">
<span>def <span class="ident">non_unique_mention_attr</span></span>(<span>self, attr)</span>
</code></dt>
<dd>
<section class="desc"><p>Get a list of mention attribute values</p>
<p>Crudely: <code>[getattr(mention, attr) for mention in self]</code></p>
<p>Raise AttributeError if none of the mentions contained in the entity
have the requested attribute.</p>
<p>If at least one mention has the requested attribute, quietly leave out
the mentions that don't.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L54-L74" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def non_unique_mention_attr(self, attr):
    &#34;&#34;&#34;
    Get a list of mention attribute values

    Crudely: `[getattr(mention, attr) for mention in self]`

    Raise AttributeError if none of the mentions contained in the entity
    have the requested attribute.

    If at least one mention has the requested attribute, quietly leave out
    the mentions that don&#39;t.
    &#34;&#34;&#34;
    # Try to get all answers
    all_answers = [
        getattr(m, attr) for m in self if hasattr(m, attr)
    ]
    if not all_answers:
        raise AttributeError(
            &#34;None of the mentions have a non-None value for the attribute&#34;
            f&#34; {attr!r}&#34;)
    return all_answers</code></pre>
</details>
</dd>
<dt id="multisieve_coreference.entity.Entity.non_unique_non_none_mention_attr"><code class="name flex">
<span>def <span class="ident">non_unique_non_none_mention_attr</span></span>(<span>self, attr)</span>
</code></dt>
<dd>
<section class="desc"><p>Get a list of mention attribute values, quietly leaving out None values</p>
<h2 id="crudely">Crudely</h2>
<pre><code>[
    getattr(mention, attr)
    for mention in self
    if getattr(mention, attr) is not None
]
</code></pre>
<p>Raise AttributeError if none of the mentions contained in the entity
have the requested attribute.</p>
<p>If at least one mention has the requested attribute, quietly leave out
the mentions that don't.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/MPvHarmelen/coref_draft/blob/fcb5535444fd8ef6a0f9f27c2bcd7e1078a65ace/multisieve_coreference/entity.py#L76-L99" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def non_unique_non_none_mention_attr(self, attr):
    &#34;&#34;&#34;
    Get a list of mention attribute values, quietly leaving out None values

    Crudely:
        ```
        [
            getattr(mention, attr)
            for mention in self
            if getattr(mention, attr) is not None
        ]
        ```

    Raise AttributeError if none of the mentions contained in the entity
    have the requested attribute.

    If at least one mention has the requested attribute, quietly leave out
    the mentions that don&#39;t.
    &#34;&#34;&#34;
    return [
        ans
        for ans in self.non_unique_mention_attr(attr)
        if ans is not None
    ]</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="multisieve_coreference" href="index.html">multisieve_coreference</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="multisieve_coreference.entity.Entity" href="#multisieve_coreference.entity.Entity">Entity</a></code></h4>
<ul class="">
<li><code><a title="multisieve_coreference.entity.Entity.flat_mention_attr" href="#multisieve_coreference.entity.Entity.flat_mention_attr">flat_mention_attr</a></code></li>
<li><code><a title="multisieve_coreference.entity.Entity.mention_attr" href="#multisieve_coreference.entity.Entity.mention_attr">mention_attr</a></code></li>
<li><code><a title="multisieve_coreference.entity.Entity.non_unique_mention_attr" href="#multisieve_coreference.entity.Entity.non_unique_mention_attr">non_unique_mention_attr</a></code></li>
<li><code><a title="multisieve_coreference.entity.Entity.non_unique_non_none_mention_attr" href="#multisieve_coreference.entity.Entity.non_unique_non_none_mention_attr">non_unique_non_none_mention_attr</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.5.dev4+g1709915.d20200207</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>